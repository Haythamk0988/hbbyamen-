<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Birthday Yamen! üéâ</title>
  <!-- Consolidated Google Fonts import with display swap -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Great+Vibes&family=Permanent+Marker&family=Dancing+Script:wght@700&family=Pacifico&family=Lobster&family=Satisfy&family=Kaushan+Script&display=swap" rel="stylesheet">

  <style>
    :root {
        --font-primary: "Poppins", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
        --font-decorative: "Great Vibes", "Dancing Script", cursive;
        --pull-tab-bg: #ff4444;
        --text-color: #333;
        --transition-duration: 0.8s;
        --cascade-delay: 1000ms;
        /* Updated color palette for page reveals */
        --color1: #ff9a9e;
        --color2: #f6d365;
        --color3: #fda085;
        --color4: #a1c4fd;
        --color5: #cfd9df;
    }
    
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }
    
    body {
        min-height: 100vh;
        font-family: var(--font-primary);
        overflow-x: hidden;
        cursor: grab;
        background: white;
        transition: background 1s ease;
    }
    
    /* ===== INTRO IMAGE ===== */
    #introImage {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-width: 80%;
      max-height: 80%;
      z-index: 1000;
      transition: all 0.5s ease;
      border: 5px solid #fff;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      opacity: 1;
      transform-origin: center;
    }
    #introImage.hide {
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.8);
      pointer-events: none;
    }
    
    /* ===== BACKGROUND EMOJI OVERLAY ===== */
    #emojiOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }
    .bg-emoji {
      position: absolute;
      font-size: 2rem;
      opacity: 0.7;
      animation: swim 30s ease-in-out infinite;
    }
    .star-emoji {
      text-shadow: 0 0 5px gold, 0 0 10px gold, 0 0 15px gold;
    }
    @keyframes swim {
      0% { transform: translate(0, 0); }
      25% { transform: translate(15px, -10px); }
      50% { transform: translate(30px, 10px); }
      75% { transform: translate(15px, 20px); }
      100% { transform: translate(0, 0); }
    }
    
    /* ===== STAR PARTICLE ===== */
    .star-particle {
      position: fixed;
      width: 4px;
      height: 4px;
      background: gold;
      border-radius: 50%;
      pointer-events: none;
      animation: starParticleTrail 0.5s linear forwards;
    }
    @keyframes starParticleTrail {
      from { transform: translate(0, 0); opacity: 1; }
      to { transform: translate(10px, 10px); opacity: 0; }
    }
    
    /* ===== PULL TAB ===== */
    .pull-tab {
      position: fixed;
      top: 50px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #ff6b6b, #ff4444);
      color: white;
      padding: 15px 40px;
      border-radius: 30px;
      border: 3px solid rgba(255, 255, 255, 0.8);
      cursor: pointer;
      box-shadow: 0 8px 25px rgba(255, 68, 68, 0.3);
      z-index: 1001;
      animation: pulseTab 2s ease-in-out infinite;
      transition: transform 0.3s ease, background 0.3s ease, box-shadow 0.3s ease;
      font-weight: 700;
      font-size: 1.1rem;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
    }
    .pull-tab:before, .pull-tab:after { content: "üéÅ"; font-size: 1.2rem; }
    @keyframes pulseTab {
      0% { transform: translateX(-50%) scale(1); }
      50% { transform: translateX(-50%) scale(1.05); }
      100% { transform: translateX(-50%) scale(1); }
    }
    .pull-tab:hover {
      transform: translateX(-50%) scale(1.08);
      background: linear-gradient(135deg, #ff9a9e, #ff5757);
      box-shadow: 0 12px 30px rgba(255, 68, 68, 0.4);
    }
    
    .pull-instruction {
      position: fixed;
      top: 120px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #fff, #f8f9fa);
      color: #ff4444;
      padding: 12px 25px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      z-index: 1001;
      animation: floatInstruction 2s ease-in-out infinite;
      border: 2px solid rgba(255, 68, 68, 0.2);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      white-space: nowrap;
    }
    @keyframes floatInstruction {
      0% { transform: translateX(-50%) translateY(0); }
      50% { transform: translateX(-50%) translateY(-5px); }
      100% { transform: translateX(-50%) translateY(0); }
    }
    
    @media only screen and (max-width: 768px) {
      .pull-tab { top: 30px; padding: 12px 30px; font-size: 1rem; }
      .pull-instruction { top: 90px; font-size: 0.85rem; padding: 10px 20px; }
    }
    @media only screen and (max-width: 480px) {
      .pull-tab { top: 20px; width: 85%; padding: 10px 20px; font-size: 0.9rem; }
      .pull-instruction { top: 75px; width: 80%; font-size: 0.8rem; text-align: center; }
    }
    
    /* ===== PAPER STACK & FOLDING ANIMATION ===== */
    .paper-container {
      position: relative;
      width: 90%;
      max-width: 800px;
      margin: 120px auto 0;
      z-index: 10;
      perspective: 1200px;
    }
    .paper-stack { 
      position: relative; 
      height: 15000px; /* Updated to accommodate 10 pages */
      margin-top: 50px; /* Add initial spacing */
    }
    .paper-roll {
      position: absolute;
      width: 100%;
      min-height: 960px;
      background-color: rgba(255,255,255,0.98);
      background-image: linear-gradient(transparent 29px, rgba(0,0,0,0.05) 29px, rgba(0,0,0,0.05) 30px);
      background-size: 100% 30px;
      padding: 20px;
      border-radius: 0 0 0 20px;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
      transform-origin: top center;
      transform: translateY(-150%) rotateX(15deg) scale(0.95);
      transition: transform var(--transition-duration) cubic-bezier(0.22, 1, 0.36, 1), 
                  box-shadow var(--transition-duration) cubic-bezier(0.22, 1, 0.36, 1);
      z-index: 1;
      margin-bottom: 100px; /* Add spacing between papers */
    }
    .paper-roll.revealed {
      animation: foldAnimation var(--transition-duration) cubic-bezier(0.22, 1, 0.36, 1) forwards;
    }
    @keyframes foldAnimation {
      0% { transform: translateY(-150%) rotateX(15deg) scale(0.95); opacity: 0.7; }
      60% { transform: translateY(calc(var(--final-y) - 20px)) rotateX(5deg) scale(1.02); opacity: 0.9; }
      100% { transform: translateY(var(--final-y)) rotateX(0deg) scale(1); opacity: 1; }
    }
    .paper-content {
      opacity: 0;
    }
    .paper-roll.revealed .paper-content {
      animation: contentPop 0.8s ease forwards;
    }
    @keyframes contentPop {
      0% { transform: scale(0.8); opacity: 0; }
      50% { transform: scale(1.05); opacity: 0.7; }
      100% { transform: scale(1); opacity: 1; }
    }
    
    .emoji-bar {
      text-align: center;
      font-size: 2em;
      margin-bottom: 10px;
    }
    .birthday-text {
      font-size: 1.5em;
      color: var(--text-color);
      margin: 25px 0;
      text-align: center;
      line-height: 1.6;
    }
    
    /* ===== PARTICLE EFFECTS ===== */
    .confetti, .air-particle, .swirl { pointer-events: none; }
    .confetti {
      position: fixed;
      width: 12px;
      height: 12px;
      animation: confetti-fall 3s linear forwards;
      border-radius: 2px;
    }
    @keyframes confetti-fall {
      0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }
    .air-particle {
      position: absolute;
      width: 8px;
      height: 8px;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 50%;
      animation: float-up 2s ease-out forwards;
    }
    @keyframes float-up {
      0% { transform: translateY(0) scale(1); opacity: 0.8; }
      100% { transform: translateY(-100px) scale(0.2); opacity: 0; }
    }
    .swirl {
      position: absolute;
      width: 40px;
      height: 40px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      animation: swirl-up 1.5s ease-out forwards;
    }
    @keyframes swirl-up {
      0% { transform: translateY(0) rotate(0deg) scale(1); opacity: 0.6; }
      100% { transform: translateY(-200px) rotate(720deg) scale(0); opacity: 0; }
    }
    
    /* ===== MODIFIED BACKGROUND MESSAGE ===== */
    #bgMessage {
      position: fixed;
      bottom: 50px;
      left: 50%;
      transform: translateX(-50%);
      font-family: 'Great Vibes', cursive;
      font-size: 3.5rem;
      color: rgba(241, 241, 241, 0.9);
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      opacity: 0;
      transition: opacity 0.5s ease;
      z-index: 1000;
      pointer-events: none;
      mix-blend-mode: overlay;
      white-space: nowrap;
      display: none;
    }

    /* iPhone XR Specific Styles */
    @media only screen 
    and (device-width: 414px) 
    and (device-height: 896px) 
    and (-webkit-device-pixel-ratio: 2) {
      .paper-container {
        width: 95%;
        margin: 70px auto 0;
      }
      
      .paper-roll {
        padding: 15px;
        margin-bottom: 25px;
        min-height: auto;
      }
      
      .birthday-text {
        font-size: 1.1em;
        line-height: 1.5;
        padding: 0 10px;
      }
      
      .emoji-bar {
        font-size: 1.8em;
        margin: 15px 0;
      }
      
      h1 {
        font-size: 1.6em;
        margin: 15px 0;
      }
      
      #introImage {
        max-width: 85%;
        max-height: 65%;
      }
      
      .pull-tab {
        width: 85%;
        top: 25px;
        padding: 12px 20px;
        font-size: 1rem;
      }
      
      #bgMessage {
        font-size: 2.2rem;
        bottom: 70px;
      }
      
      #muteButton {
        bottom: 15px;
        right: 15px;
      }
    }
    
    /* iPad Specific Styles */
    @media only screen 
    and (min-device-width: 768px) 
    and (max-device-width: 1024px) {
      .paper-container {
        width: 85%;
        margin: 100px auto 0;
      }
      
      .paper-roll {
        padding: 25px;
        margin-bottom: 35px;
      }
      
      .birthday-text {
        font-size: 1.4em;
        line-height: 1.6;
        padding: 0 20px;
      }
      
      .emoji-bar {
        font-size: 2.2em;
        margin: 20px 0;
      }
      
      h1 {
        font-size: 2em;
        margin: 20px 0;
      }
      
      #introImage {
        max-width: 70%;
        max-height: 70%;
      }
      
      .pull-tab {
        width: 60%;
        top: 40px;
        padding: 15px 30px;
        font-size: 1.2rem;
      }
      
      #bgMessage {
        font-size: 3.5rem;
        bottom: 80px;
      }
    }

    /* Enhanced countdown styles for better appearance */
    #countdownIntro {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #feeeed, #ffd6d6);
      z-index: 2000;
      opacity: 1;
      transition: opacity 0.8s ease;
    }
    
    .intro-content {
      text-align: center;
      padding: 35px 25px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 10;
    }
    
    .intro-title {
      font-family: 'Montserrat', sans-serif;
      font-weight: 700;
      font-size: 1.8rem;
      color: #ff6b6b;
      margin-bottom: 20px;
    }
    
    .intro-instructions {
      font-family: 'Montserrat', sans-serif;
      font-size: 1rem;
      line-height: 1.6;
      margin-bottom: 25px;
      color: #444;
      padding: 0 5px;
    }
    
    .countdown-display {
      font-family: 'Montserrat', sans-serif;
      font-weight: 700;
      font-size: 4.5rem;
      color: #ff6b6b;
      height: 6rem;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      margin: 20px 0;
    }
    
    .countdown-number {
      position: absolute;
      opacity: 1;
      transition: all 0.3s ease;
    }
    
    .countdown-number.fade-out {
      opacity: 0;
      transform: scale(1.2);
    }
    
    .countdown-number.fade-in {
      opacity: 0;
      transform: scale(0.8);
      animation: fadeInNumber 0.3s forwards;
    }
    
    @keyframes fadeInNumber {
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    
    .countdown-controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }
    
    .countdown-btn {
      background-color: #ff6b6b;
      color: white;
      border: none;
      padding: 12px 28px;
      border-radius: 30px;
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: transform 0.2s ease, background-color 0.2s ease;
      box-shadow: 0 4px 10px rgba(255, 107, 107, 0.3);
    }
    
    .countdown-btn:hover {
      background-color: #ff5252;
      transform: translateY(-2px);
    }
    
    .countdown-btn:active {
      transform: translateY(0);
    }
    
    /* Simplified particle system for better performance */
    .intro-emoji {
      position: absolute;
      opacity: 0.6;
      pointer-events: none;
      font-size: 1.4rem;
      transform: translate(0, 0);
      transition: transform 0.5s ease-out;
    }
    
    /* Responsive adjustments */
    @media only screen and (max-width: 480px) {
      .intro-title {
        font-size: 1.5rem;
      }
      
      .intro-instructions {
        font-size: 0.95rem;
      }
      
      .countdown-display {
        font-size: 4rem;
      }
      
      .countdown-btn {
        padding: 10px 20px;
        font-size: 0.9rem;
      }
    }
    
    /* iOS-specific fixes */
    @supports (-webkit-touch-callout: none) {
      .intro-content {
        -webkit-transform: translateZ(0);
      }
      
      .countdown-btn {
        -webkit-appearance: none;
      }
    }

    /* Unique page decorations */
    .paper-roll:nth-child(1) {
      background: linear-gradient(135deg, #fff5f5 0%, #ffe3e3 100%);
      border: 3px solid #ffcdd2;
      box-shadow: 0 10px 30px rgba(255, 82, 82, 0.2);
    }
    .paper-roll:nth-child(1) h1 {
      font-family: 'Dancing Script', cursive;
      color: #ff6b6b;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    .paper-roll:nth-child(2) {
      background: linear-gradient(135deg, #fff8e1 0%, #ffe0b2 100%);
      border: 3px solid #ffe0b2;
      box-shadow: 0 10px 30px rgba(255, 193, 7, 0.2);
    }
    .paper-roll:nth-child(2) h1 {
      font-family: 'Pacifico', cursive;
      color: #ffa000;
    }

    .paper-roll:nth-child(3) {
      background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
      border: 3px solid #c8e6c9;
      box-shadow: 0 10px 30px rgba(76, 175, 80, 0.2);
    }
    .paper-roll:nth-child(3) h1 {
      font-family: 'Lobster', cursive;
      color: #43a047;
    }

    .paper-roll:nth-child(4) {
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
      border: 3px solid #bbdefb;
      box-shadow: 0 10px 30px rgba(33, 150, 243, 0.2);
    }
    .paper-roll:nth-child(4) h1 {
      font-family: 'Satisfy', cursive;
      color: #1e88e5;
    }

    .paper-roll:nth-child(5) {
      background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
      border: 3px solid #e1bee7;
      box-shadow: 0 10px 30px rgba(156, 39, 176, 0.2);
    }
    .paper-roll:nth-child(5) h1 {
      font-family: 'Kaushan Script', cursive;
      color: #8e24aa;
    }

    .paper-roll:nth-child(6) {
      background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 100%);
      border: 3px solid #f8bbd0;
      box-shadow: 0 10px 30px rgba(233, 30, 99, 0.2);
    }
    .paper-roll:nth-child(6) h1 {
      font-family: 'Dancing Script', cursive;
      color: #d81b60;
    }

    .paper-roll:nth-child(7) {
      background: linear-gradient(135deg, #fffde7 0%, #fff9c4 100%);
      border: 3px solid #fff9c4;
      box-shadow: 0 10px 30px rgba(255, 235, 59, 0.2);
    }
    .paper-roll:nth-child(7) h1 {
      font-family: 'Pacifico', cursive;
      color: #fdd835;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }

    .paper-roll:nth-child(8) {
      background: linear-gradient(135deg, #e8eaf6 0%, #c5cae9 100%);
      border: 3px solid #c5cae9;
      box-shadow: 0 10px 30px rgba(63, 81, 181, 0.2);
    }
    .paper-roll:nth-child(8) h1 {
      font-family: 'Lobster', cursive;
      color: #3949ab;
    }

    .paper-roll:nth-child(9) {
      background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
      border: 3px solid #b2ebf2;
      box-shadow: 0 10px 30px rgba(0, 188, 212, 0.2);
    }
    .paper-roll:nth-child(9) h1 {
      font-family: 'Satisfy', cursive;
      color: #00acc1;
    }

    .paper-roll:nth-child(10) {
      background: linear-gradient(135deg, #f1f8e9 0%, #dcedc8 100%);
      border: 3px solid #dcedc8;
      box-shadow: 0 10px 30px rgba(139, 195, 74, 0.2);
    }
    .paper-roll:nth-child(10) h1 {
      font-family: 'Kaushan Script', cursive;
      color: #7cb342;
    }

    /* Enhanced paper content styles */
    .paper-content {
      padding: 30px;
      border-radius: 15px;
    }

    /* Unique list styles for each page */
    .paper-roll:nth-child(2) ul {
      list-style: none;
      padding-left: 0;
    }
    .paper-roll:nth-child(2) li {
      margin: 15px 0;
      padding: 15px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 10px;
      transition: transform 0.3s ease;
      position: relative;
      z-index: 1;
    }
    .paper-roll:nth-child(2) li:hover {
      transform: translateX(10px);
    }

    /* Memory collection page styling */
    .paper-roll:nth-child(7) .memory-card {
      background: rgba(255, 255, 255, 0.9);
      padding: 20px;
      margin: 15px 0;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
    }
    .paper-roll:nth-child(7) .memory-card:hover {
      transform: translateY(-5px);
    }

    /* Playlist page styling */
    .paper-roll:nth-child(8) .song-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 8px;
      margin: 10px 0;
      transition: all 0.3s ease;
    }
    .paper-roll:nth-child(8) .song-item:hover {
      background: rgba(255, 255, 255, 0.95);
      transform: scale(1.02);
    }

    /* Challenge list styling */
    .paper-roll:nth-child(9) ol {
      columns: 2;
      column-gap: 40px;
    }
    .paper-roll:nth-child(9) li {
      margin-bottom: 15px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 8px;
      break-inside: avoid;
    }

    /* Final message styling */
    .paper-roll:nth-child(10) .final-message {
      text-align: center;
      padding: 40px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    #finalMessage {
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      font-family: 'Great Vibes', cursive;
      font-size: 3rem;
      color: #ffffff;
      opacity: 0;
      transition: all 1.5s ease;
      position: relative;
      z-index: 1000;
      padding: 20px;
      background: linear-gradient(135deg, rgba(0,0,0,0.2), rgba(0,0,0,0.4));
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      animation: gradientBG 10s ease infinite;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .rainbow-word {
      display: inline-block;
      background: linear-gradient(90deg, 
        #ff1493, #ff4500, #ffd700, #00ff00, 
        #00ffff, #ff00ff, #ff69b4
      );
      background-size: 200% auto;
      animation: wordGlow 3s ease-in-out infinite,
                 gradientMove 6s linear infinite;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: none;
      font-weight: bold;
      padding: 0 5px;
      position: relative;
      will-change: filter, transform;
      isolation: isolate;
    }

    .rainbow-word::before {
      content: "";
      position: absolute;
      inset: -2px;
      background: inherit;
      filter: blur(10px);
      opacity: 0.7;
      z-index: -1;
      will-change: filter, opacity;
    }

    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    @keyframes wordGlow {
      0%, 100% { 
        filter: drop-shadow(0 0 10px rgba(255,255,255,0.8))
                drop-shadow(0 0 20px currentColor)
                drop-shadow(0 0 30px currentColor);
        transform: scale(1);
      }
      50% { 
        filter: drop-shadow(0 0 15px rgba(255,255,255,1))
                drop-shadow(0 0 25px currentColor)
                drop-shadow(0 0 35px currentColor);
        transform: scale(1.1);
      }
    }

    @keyframes gradientBG {
      0% { background: linear-gradient(135deg, rgba(255,154,158,0.3), rgba(0,0,0,0.4)); }
      25% { background: linear-gradient(135deg, rgba(246,211,101,0.3), rgba(0,0,0,0.4)); }
      50% { background: linear-gradient(135deg, rgba(253,160,133,0.3), rgba(0,0,0,0.4)); }
      75% { background: linear-gradient(135deg, rgba(161,196,253,0.3), rgba(0,0,0,0.4)); }
      100% { background: linear-gradient(135deg, rgba(255,154,158,0.3), rgba(0,0,0,0.4)); }
    }

    #finalMessage .message-content {
      position: relative;
      padding: 40px 60px;
      border-radius: 20px;
      background: linear-gradient(135deg, rgba(0,0,0,0.4), rgba(0,0,0,0.2));
      box-shadow: 
        0 8px 32px rgba(0,0,0,0.3),
        0 0 20px rgba(255,255,255,0.1);
      border: 2px solid rgba(255,255,255,0.3);
      transform: scale(0.9);
      transition: all 1s ease;
      font-weight: 600;
      line-height: 1.5;
    }

    .rainbow-letter {
      display: inline-block;
      animation: letterPulse 2s ease-in-out infinite;
      text-shadow: 0 0 10px currentColor, 0 0 20px currentColor, 0 0 30px currentColor;
    }

    @keyframes letterPulse {
      0%, 100% { opacity: 0.8; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.05); }
    }

    #finalMessage .message-content::before,
    #finalMessage .message-content::after {
      content: 'üíù';
      position: absolute;
      font-size: 3rem; /* Increased size */
      opacity: 0.9; /* Increased opacity */
      animation: float 3s ease-in-out infinite;
      filter: drop-shadow(0 0 10px rgba(255,255,255,0.5)); /* Added glow to emojis */
    }

    #finalMessage .message-content::before {
      top: -25px;
      left: -25px;
      animation-delay: -1.5s;
    }

    #finalMessage .message-content::after {
      bottom: -25px;
      right: -25px;
    }

    #finalMessage .sparkle {
      position: absolute;
      width: 6px; /* Larger sparkles */
      height: 6px;
      border-radius: 50%;
      background: white;
      box-shadow: 0 0 10px rgba(255,255,255,0.8); /* Added glow to sparkles */
      animation: sparkle 2s linear infinite;
      opacity: 0;
    }

    /* Add a subtle pulsing animation to the text */
    @keyframes textPulse {
      0%, 100% { text-shadow: 2px 2px 4px rgba(0,0,0,0.3), -2px -2px 4px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.5); }
      50% { text-shadow: 2px 2px 4px rgba(0,0,0,0.3), -2px -2px 4px rgba(0,0,0,0.3), 0 0 30px rgba(255,255,255,0.7); }
    }

    /* Apply the pulsing animation to the text */
    #finalMessage .message-content {
      animation: textPulse 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      50% { transform: translate(5px, -5px) rotate(5deg); }
    }

    .page {
      will-change: transform, opacity;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
      transform: translateZ(0);
      transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1),
                  opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Add these new styles for Page 1 */
    @keyframes floatingText {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }

    @keyframes glowingBorder {
      0% { box-shadow: 0 0 5px #ff6b6b, 0 0 10px #ff6b6b, 0 0 15px #ff6b6b; }
      50% { box-shadow: 0 0 10px #ff6b6b, 0 0 20px #ff6b6b, 0 0 30px #ff6b6b; }
      100% { box-shadow: 0 0 5px #ff6b6b, 0 0 10px #ff6b6b, 0 0 15px #ff6b6b; }
    }

    @keyframes sparkle {
      0% { transform: scale(1) rotate(0deg); opacity: 1; }
      50% { transform: scale(1.5) rotate(180deg); opacity: 0.8; }
      100% { transform: scale(1) rotate(360deg); opacity: 1; }
    }

    .sparkle-element {
      position: absolute;
      pointer-events: none;
      animation: sparkle 2s infinite;
    }

    .first-page-content {
      position: relative;
      background: linear-gradient(135deg, #fff5f5 0%, #ffe3e3 100%);
      border-radius: 20px;
      padding: 40px;
      margin: 20px;
      border: 3px solid #ffcdd2;
      animation: glowingBorder 3s infinite;
      overflow: hidden;
      z-index: 5;
    }

    .birthday-heading {
      font-family: 'Dancing Script', cursive;
      font-size: 3em;
      color: #ff6b6b;
      text-align: center;
      margin-bottom: 30px;
      animation: floatingText 3s ease-in-out infinite;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
      position: relative;
      z-index: 10;
    }

    .birthday-message {
      font-family: 'Montserrat', sans-serif;
      font-size: 1.2em;
      line-height: 1.8;
      color: #333;
      text-align: center;
      position: relative;
      z-index: 1;
    }

    .birthday-message p {
      margin: 15px 0;
      padding: 10px;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 10px;
      transition: transform 0.3s ease;
    }

    .birthday-message p:hover {
      transform: translateX(10px);
      background: rgba(255, 255, 255, 0.9);
    }

    /* Add these new styles for Page 4 */
    .adventure-content {
      position: relative;
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
      border-radius: 20px;
      padding: 30px;
      margin: 20px;
      border: 3px solid #90caf9;
      box-shadow: 0 0 15px rgba(33, 150, 243, 0.3);
      overflow: hidden;
    }

    .adventure-content::before,
    .adventure-content::after {
      content: 'üåü';
      position: absolute;
      font-size: 2em;
      animation: rotateStar 4s linear infinite;
    }

    .adventure-content::before {
      top: 10px;
      left: 10px;
    }

    .adventure-content::after {
      bottom: 10px;
      right: 10px;
      animation-delay: -2s;
    }

    @keyframes rotateStar {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .adventure-heading {
      font-family: 'Pacifico', cursive;
      font-size: 2.5em;
      color: #1e88e5;
      text-align: center;
      margin-bottom: 25px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
      position: relative;
    }

    .adventure-heading::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 150px;
      height: 3px;
      background: linear-gradient(90deg, transparent, #1e88e5, transparent);
    }

    .road-ahead {
      text-align: center;
      margin-bottom: 30px;
      position: relative;
      padding: 20px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .adventure-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-top: 30px;
    }

    .adventure-item {
      background: rgba(255, 255, 255, 0.85);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .adventure-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.15);
    }

    .adventure-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #1e88e5, #64b5f6);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .adventure-item:hover::before {
      opacity: 1;
    }

    /* Add new animations for pages 5-8 */
    @keyframes letterFloat {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    @keyframes cardPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }

    @keyframes shimmer {
      0% { background-position: -200% center; }
      100% { background-position: 200% center; }
    }

    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    /* Page 5 animations */
    .paper-roll:nth-child(5) .paper-content {
      position: relative;
      overflow: hidden;
    }

    .paper-roll:nth-child(5) p {
      animation: letterFloat 3s ease-in-out infinite;
    }

    .paper-roll:nth-child(5) .floating-item {
      animation: float 4s ease-in-out infinite;
    }

    /* Page 6 animations */
    .paper-roll:nth-child(6) li {
      background: linear-gradient(90deg, 
        rgba(255,255,255,0.8) 0%, 
        rgba(255,255,255,0.9) 50%, 
        rgba(255,255,255,0.8) 100%);
      background-size: 200% 100%;
      animation: shimmer 6s linear infinite;
      transition: transform 0.3s ease;
    }

    .paper-roll:nth-child(6) li:hover {
      transform: translateX(10px) scale(1.02);
    }

    .paper-roll:nth-child(6) li span {
      animation: heartbeat 2s ease-in-out infinite;
      display: inline-block;
    }

    /* Page 7 animations */
    .paper-roll:nth-child(7) .memory-card {
      position: relative;
      overflow: hidden;
      animation: cardPulse 3s ease-in-out infinite;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .paper-roll:nth-child(7) .memory-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.2),
        transparent
      );
      animation: shimmer 3s infinite;
    }

    .paper-roll:nth-child(7) .memory-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }

    /* Page 8 animations */
    .paper-roll:nth-child(8) .song-item {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .paper-roll:nth-child(8) .song-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.3),
        transparent
      );
      animation: shimmer 3s infinite;
    }

    .paper-roll:nth-child(8) .song-emoji {
      display: inline-block;
      animation: heartbeat 2s ease-in-out infinite;
    }

    .paper-roll:nth-child(8) .song-item:hover {
      transform: scale(1.03);
      background: rgba(255, 255, 255, 0.95);
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    /* Remove sparkle styles and replace with new animations */
    @keyframes softGlow {
      0%, 100% { text-shadow: 0 0 5px rgba(255, 223, 0, 0.3), 0 0 10px rgba(255, 223, 0, 0.2); }
      50% { text-shadow: 0 0 10px rgba(255, 223, 0, 0.5), 0 0 20px rgba(255, 223, 0, 0.3); }
    }

    @keyframes gentleWave {
      0%, 100% { transform: translateX(0); }
      50% { transform: translateX(5px); }
    }

    @keyframes subtlePop {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }

    @keyframes colorCycle {
      0% { color: #ff69b4; }
      25% { color: #da70d6; }
      50% { color: #9370db; }
      75% { color: #ba55d3; }
      100% { color: #ff69b4; }
    }

    /* Page 5 unique animations */
    .paper-roll:nth-child(5) .paper-content {
      position: relative;
    }

    .paper-roll:nth-child(5) p {
      transition: all 0.3s ease;
    }

    .paper-roll:nth-child(5) p:hover {
      letter-spacing: 0.3px;
    }

    /* Special glow for the word "proud" */
    .paper-roll:nth-child(5) p:contains("proud") {
      display: inline;
    }

    .paper-roll:nth-child(5) .proud-text {
      animation: softGlow 2s ease-in-out infinite;
      color: #ffd700;
      font-weight: bold;
    }

    /* Page 6 unique animations */
    .paper-roll:nth-child(6) li {
      position: relative;
      overflow: hidden;
    }

    .paper-roll:nth-child(6) li::before {
      content: '‚ú®';
      position: absolute;
      left: -20px;
      opacity: 0;
      transition: all 0.3s ease;
    }

    .paper-roll:nth-child(6) li:hover::before {
      left: 0;
      opacity: 1;
    }

    .paper-roll:nth-child(6) span {
      animation: gentleWave 3s ease-in-out infinite;
      display: inline-block;
    }

    /* Page 7 unique animations */
    .paper-roll:nth-child(7) .memory-card {
      position: relative;
    }

    .paper-roll:nth-child(7) .memory-card h3 {
      animation: colorCycle 8s infinite;
    }

    .paper-roll:nth-child(7) .memory-card:hover {
      background: linear-gradient(45deg, rgba(255,255,255,0.95), rgba(255,192,203,0.2));
    }

    /* Page 8 unique animations */
    .paper-roll:nth-child(8) .song-item {
      position: relative;
      border-left: 3px solid transparent;
      transition: all 0.3s ease;
    }

    .paper-roll:nth-child(8) .song-item:hover {
      border-left: 3px solid #ff69b4;
      padding-left: 15px;
    }

    .paper-roll:nth-child(8) .song-emoji {
      display: inline-block;
      animation: subtlePop 2s ease-in-out infinite;
    }

    /* Remove white dots by updating sparkle styles */
    #finalMessage .sparkle {
      display: none;
    }
  </style>
</head>
<body>
  <!-- Background Emoji Overlay -->
  <div id="emojiOverlay"></div>
  
  <!-- INTRO IMAGE -->
  <img src="hppy.png" id="introImage" alt="Happy Image" />
  
  <!-- PULL TAB & INSTRUCTION -->
  <div class="pull-tab" id="pullTab" aria-label="Pull down to open">
    üéÅ PULL DOWN TO OPEN üéÅ
  </div>
  <div class="pull-instruction">‚¨áÔ∏è Hold and pull down ‚¨áÔ∏è</div>
  
  <div class="paper-container">
    <div class="paper-stack" id="paperStack">
      <!-- PAGE 1 Replacement -->
<div class="paper-roll">
    <div class="paper-content">
        <div class="emoji-bar">üéâüéàü•≥</div>
        <div class="first-page-content">
            <h1 class="birthday-heading">Happy birthday yamen</h1>
            <div class="birthday-message">
                <p>Yo, Yamen! Today you level up to 18, and it's absolutely abrupt! üåü</p>
                <p>I still remember us goofing around and dreaming big as teens‚Äînow look at you, all grown and ready to take on the world! ‚ú®</p>
                <p>Turning 18 is like hitting the ultimate unlock code for new adventures, and I'm so stoked for you! üöÄ</p>
                <p>It's not just another birthday; it's a full-on milestone that marks the start of an epic story! üìñ</p>
                <p>From late-night hangs to spontaneous road trips, I can't wait to see you chase every crazy dream of yours! üí´</p>
                <p>Life's gonna throw some wild curves, but I know you'll smash through them with that fearless spirit of yours! üí™</p>
                <p>Here's to endless laughs, deep convos, and moments that make you go "Whoa, did that really just happen?" üéâ</p>
                <p>Enjoy every bit of this insane ride, your best days are only getting started! üåà</p>
            </div>
        </div>
    </div>
</div>
  
      <!-- PAGE 2 Replacement -->
<div class="paper-roll">
    <div class="paper-content">
      <div class="emoji-bar">‚ú®üåüüí´</div>
      <h1 style="text-align: center;">15 Reasons to Be Happy</h1>
      <ul style="font-family: 'Permanent Marker', cursive; font-size: 1.2em; color: #333; line-height: 1.6; list-style: none; padding: 20px;">
        <li style="margin: 15px 0; padding: 15px; background: rgba(255, 255, 255, 0.7); border-radius: 10px; transition: transform 0.3s ease; position: relative; z-index: 1;">üåü You are insanly pretty .</li>
        <li style="margin: 15px 0; padding: 15px; background: rgba(255, 255, 255, 0.7); border-radius: 10px; transition: transform 0.3s ease; position: relative; z-index: 1;">‚ú® you are young and full of energy .</li>
        <li style="margin: 15px 0; padding: 15px; background: rgba(255, 255, 255, 0.7); border-radius: 10px; transition: transform 0.3s ease; position: relative; z-index: 1;">üí´ Your smile lights up every room you enter.</li>
        <li style="margin: 15px 0; padding: 15px; background: rgba(255, 255, 255, 0.7); border-radius: 10px; transition: transform 0.3s ease; position: relative; z-index: 1;">üåà  you have a heart full of love and kindness.</li>
        <li style="margin: 15px 0; padding: 15px; background: rgba(255, 255, 255, 0.7); border-radius: 10px; transition: transform 0.3s ease; position: relative; z-index: 1;">üí™ You're brave enough to take on any challenge.</li>
        <li style="margin: 15px 0; padding: 15px; background: rgba(255, 255, 255, 0.7); border-radius: 10px; transition: transform 0.3s ease; position: relative; z-index: 1;">üé® Your mindset makes the world more colorful.</li>
        <li style="margin: 15px 0; padding: 15px; background: rgba(255, 255, 255, 0.7); border-radius: 10px; transition: transform 0.3s ease; position: relative; z-index: 1;">üåü You have a unique style that sets you apart.</li>
        <li style="margin: 15px 0; padding: 15px; background: rgba(255, 255, 255, 0.7); border-radius: 10px; transition: transform 0.3s ease; position: relative; z-index: 1;">‚ú® Every moment is a chance to create something awesome.</li>
        <li style="margin: 15px 0; padding: 15px; background: rgba(255, 255, 255, 0.7); border-radius: 10px; transition: transform 0.3s ease; position: relative; z-index: 1;">üòä Your humor brings joy to everyone around you.</li>
        <li style="margin: 15px 0; padding: 15px; background: rgba(255, 255, 255, 0.7); border-radius: 10px; transition: transform 0.3s ease; position: relative; z-index: 1;">ü§ù You're surrounded by friends who loves you</li>
        <li style="margin: 15px 0; padding: 15px; background: rgba(255, 255, 255, 0.7); border-radius: 10px; transition: transform 0.3s ease; position: relative; z-index: 1;">üí´ Every setback is just a setup for a comeback.</li>
        <li style="margin: 15px 0; padding: 15px; background: rgba(255, 255, 255, 0.7); border-radius: 10px; transition: transform 0.3s ease; position: relative; z-index: 1;">‚≠ê Your passion for life is totally contagious.</li>
        <li style="margin: 15px 0; padding: 15px; background: rgba(255, 255, 255, 0.7); border-radius: 10px; transition: transform 0.3s ease; position: relative; z-index: 1;">üåü You find reasons to smile even on tough days.</li>
        <li style="margin: 15px 0; padding: 15px; background: rgba(255, 255, 255, 0.7); border-radius: 10px; transition: transform 0.3s ease; position: relative; z-index: 1;">‚ú® Your energy lights up the world.</li>
        <li style="margin: 15px 0; padding: 15px; background: rgba(255, 255, 255, 0.7); border-radius: 10px; transition: transform 0.3s ease; position: relative; z-index: 1;">üöÄ The future holds endless possibilities for you.</li>
      </ul>
    </div>
  </div>
  
      <!-- PAGE 3 Enhanced -->
      <div class="paper-roll">
        <div class="paper-content">
          <div class="emoji-bar">üí´üåü‚ú®</div>
          <h1 style="text-align: center;">Treasured Moments & Dreams</h1>
          <div style="background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7)); padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
            <div style="text-align: center; margin-bottom: 30px;">
              <h2 style="color: #43a047; font-family: 'Dancing Script', cursive; font-size: 2em; margin-bottom: 20px;">Your Journey So Far</h2>
              <p style="font-size: 1.2em; line-height: 1.8; color: #2e7d32;">
                Every laugh shared, every challenge overcome,<br>
                Every dream chased, every victory won,<br>
                Has shaped the amazing person you are today!
          </p>
        </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px;">
              <div style="background: rgba(255,255,255,0.8); padding: 20px; border-radius: 15px; text-align: center;">
                <h3 style="color: #43a047; margin-bottom: 15px;">üåü Yesterday's Memories</h3>
                <p>Each memory is a golden thread in the tapestry of your life's story.</p>
      </div>
              <div style="background: rgba(255,255,255,0.8); padding: 20px; border-radius: 15px; text-align: center;">
                <h3 style="color: #43a047; margin-bottom: 15px;">‚ú® Tomorrow's Dreams</h3>
                <p>Your future is as bright as your dreams and as boundless as your imagination.</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- PAGE 4 Enhanced -->
      <div class="paper-roll">
        <div class="paper-content">
          <div class="emoji-bar">üå†üéØüí´</div>
          <div class="adventure-content">
            <h1 class="adventure-heading">Your Adventure Awaits</h1>
            <div class="road-ahead">
              <h2 style="color: #1e88e5; font-family: 'Pacifico', cursive; font-size: 2em; margin-bottom: 20px;">
                The Road Ahead
              </h2>
              <p style="font-size: 1.2em; line-height: 1.8; color: #1565c0;">
                At 18, you're standing at the threshold of endless possibilities.<br>
                Every dream is within reach, every goal attainable!
              </p>
            </div>
            
            <div class="adventure-grid">
              <div class="adventure-item">
                <h3 style="color: #1e88e5; margin-bottom: 15px;">üéØ Your Goals</h3>
                <ul style="list-style: none; padding: 0; text-align: left;">
                  <li style="margin: 10px 0;">üåü Chase your passions and become the best doctor ever</li>
                  <li style="margin: 10px 0;">üí´ enjoy life to the fullest</li>
                  <li style="margin: 10px 0;">‚ú® leave your mark on the world!</li>
                </ul>
              </div>
              
              <div class="adventure-item">
                <h3 style="color: #1e88e5; margin-bottom: 15px;">üí´ Your Journey</h3>
                <ul style="list-style: none; padding: 0; text-align: left;">
                  <li style="margin: 10px 0;">üå† Embrace challenges</li>
                  <li style="margin: 10px 0;">üéØ Stay determined</li>
                  <li style="margin: 10px 0;">‚≠ê Keep shining, my star!</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- PAGE 5: Personal Message -->
      <div class="paper-roll">
        <div class="paper-content">
          <div class="emoji-bar">üíù‚ú®üí´</div>
          <h1 style="text-align: center; margin-bottom: 30px;">A Letter to My Best Friend</h1>
          
          <div style="
            background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85));
            padding: 40px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
          ">
            <!-- Decorative corner elements -->
            <div style="position: absolute; top: 10px; left: 10px; font-size: 24px;">‚ú®</div>
            <div style="position: absolute; top: 10px; right: 10px; font-size: 24px;">‚ú®</div>
            <div style="position: absolute; bottom: 10px; left: 10px; font-size: 24px;">‚ú®</div>
            <div style="position: absolute; bottom: 10px; right: 10px; font-size: 24px;">‚ú®</div>
            
            <div style="
              text-align: left;
              font-family: 'Montserrat', sans-serif;
              line-height: 1.8;
              font-size: 1.1em;
              color: #333;
              position: relative;
              z-index: 2;
            ">
              <p style="margin-bottom: 20px;">
                Dear Yamen,
              </p>
              
              <p style="margin-bottom: 20px;">
                As you turn 18 today, I want to take a moment to tell you how incredibly proud I am to call you my best friend. You've grown into an amazing person with a heart of gold and a spirit that lights up every room you enter.
              </p>
              
              <p style="margin-bottom: 20px;">
                Remember all those crazy adventures we've had? from cinema nights to late hangouts at school
              </p>
              
              <p style="margin-bottom: 20px;">
                Your determination, creativity, and kindness inspire me every day. The way you chase your dreams, support your friends, and face challenges with that signature laugh of yours ‚Äì it's truly remarkable.
              </p>
              
              <p style="margin-bottom: 20px;">
                At 18, you're standing at the beginning of an incredible journey. I know you're going to achieve amazing things because that's just who you are ‚Äì a force of nature that never gives up.
              </p>
              
              <p style="margin-bottom: 20px;">
                Thank you for being the kind of friend who makes life more colorful, adventures more exciting, and every day worth looking forward to.
              </p>
              
              <p style="text-align: right; margin-top: 30px; font-family: 'Dancing Script', cursive; font-size: 1.4em;">
                With love and the best of wishes,<br>
                Your best friend forever!
              </p>
            </div>
          </div>
          
          <!-- Floating elements -->
          <div class="floating-elements" style="
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
          ">
            <style>
              @keyframes float {
                0% { transform: translate(0, 0) rotate(0deg); }
                50% { transform: translate(5px, -5px) rotate(5deg); }
                100% { transform: translate(0, 0) rotate(0deg); }
              }
              
              .floating-item {
                position: absolute;
                animation: float 3s ease-in-out infinite;
                opacity: 0.6;
                z-index: 1;
              }
            </style>
            
            <span class="floating-item" style="top: 10%; left: 5%; animation-delay: 0s;">üåü</span>
            <span class="floating-item" style="top: 20%; right: 10%; animation-delay: 0.5s;">üí´</span>
            <span class="floating-item" style="bottom: 15%; left: 8%; animation-delay: 1s;">‚ú®</span>
            <span class="floating-item" style="bottom: 25%; right: 7%; animation-delay: 1.5s;">‚≠ê</span>
          </div>
        </div>
      </div>

      <!-- PAGE 6: Future Goals Vision Board -->
      <div class="paper-roll">
        <div class="paper-content">
          <div class="emoji-bar">üéØüåü‚ú®</div>
          <h1 style="text-align: center;">Your Epic Future Awaits</h1>
          <div style="background: linear-gradient(135deg, #fff5f5, #fff0ea); padding: 25px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
            <h2 style="color: #ff6b6b; text-align: center; margin-bottom: 20px;">18 Years Young: Your Adventure Begins</h2>
            <ul style="list-style: none; padding: 0;">
              <li style="margin: 15px 0; padding-left: 30px; position: relative;">
                <span style="position: absolute; left: 0;">üéì</span>
                <strong>Education Goals:</strong> Chase those dreams, whether it's becoming a doctor or being no1 in tawjihi
              </li>
              <li style="margin: 15px 0; padding-left: 30px; position: relative;">
                <span style="position: absolute; left: 0;">üí™</span>
                <strong>Personal Growth:</strong> Level up your skills, discover new passions, and enjoy the growth!
              </li>
              <li style="margin: 15px 0; padding-left: 30px; position: relative;">
                <span style="position: absolute; left: 0;">üåç</span>
                <strong>Adventures:</strong> Travel, explore, and create memories that'll last a lifetime
              </li>
              <li style="margin: 15px 0; padding-left: 30px; position: relative;">
                <span style="position: absolute; left: 0;">üí´</span>
                <strong>Dreams:</strong> Keep dreaming big and turning those dreams into reality
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- PAGE 7: Memory Collection -->
      <div class="paper-roll">
        <div class="paper-content">
          <div class="emoji-bar">üì∏üí≠üíù</div>
          <h1 style="text-align: center;">Snapshots of Joy</h1>
          <div class="memory-collection">
            <div class="memory-card">
              <h3>‚ú® Epic Memory #1</h3>
              <p>That time we couldn't stop laughing during the movie night that we annoied everyone watching</p>
            </div>
            <div class="memory-card">
              <h3>‚ú® Epic Memory #2</h3>
              <p>When we went to the ladies bathroomüò≠ </p>
            </div>
            <div class="memory-card">
              <h3>‚ú® Epic Memory #3</h3>
              <p>when i lied to my family and went with you to the barber shop</p>
            </div>
            <div class="memory-card">
              <h3>‚ú® Epic Memory #4</h3>
              <p>when you first sat in my class and my heart said: yes thats my best friend!</p>
            </div>
          </div>
        </div>
      </div>

      <!-- PAGE 8: Birthday Playlist -->
      <div class="paper-roll">
        <div class="paper-content">
          <div class="emoji-bar">üéµüéßüé∏</div>
          <h1 style="text-align: center;">Your Birthday Soundtrack</h1>
          <div class="playlist-container">
            <!-- Add Ramadan Reminder -->
            <div style="background: rgba(0, 150, 0, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center; border: 2px solid #4CAF50;">
              <p style="color: #4CAF50; font-weight: bold; font-size: 1.2em; margin: 0;">‚ö†Ô∏è Remember it's Ramadan! Only listen after iftar! ‚ö†Ô∏è</p>
            </div>

            <!-- Add YouTube Playlist Button -->
            <a href="https://www.youtube.com/watch?v=w5tWYmIOWGk&list=PLzVJdOUvA_6hu08OSTejyUVVdz4bcSsmB" target="_blank" style="display: block; text-decoration: none; margin-bottom: 20px;">
              <div style="background: linear-gradient(135deg, #FF0000, #CC0000); padding: 15px; border-radius: 10px; text-align: center; cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease;">
                <span style="color: white; font-weight: bold; font-size: 1.1em;">
                  üéµ Click to Open Full YouTube Playlist üéµ
                </span>
              </div>
            </a>

            <div class="song-item">
              <span class="song-emoji">üéµ</span>
              <div class="song-details">
                <strong>"On Top of the World"</strong>
                <span>Imagine Dragons</span>
              </div>
            </div>
            <div class="song-item">
              <span class="song-emoji">üéµ</span>
              <div class="song-details">
                <strong>"ÿ∫ÿµŸÜ ÿ±ŸÖÿßŸÜ"</strong>
                <span>Maryam Shehab</span>
              </div>
            </div>
            <div class="song-item">
              <span class="song-emoji">üéµ</span>
              <div class="song-details">
                <strong>"Young Forever"</strong>
                <span>Jay-Z</span>
              </div>
            </div>
            <div class="song-item">
              <span class="song-emoji">üéµ</span>
              <div class="song-details">
                <strong>" In Da Club"</strong>
                <span>50 Cent </span>
              </div>
            </div>
            <div class="song-item">
              <span class="song-emoji">üéµ</span>
              <div class="song-details">
                <strong>"How Do You Do"</strong>
                <span>Nightcore Lab NCL
                </span>
              </div>
              <div class="song-item">
                <span class="song-emoji">üéµ</span>
                <div class="song-details">
                  <strong>" Me Gustas Tu"</strong>
                  <span>Manu Chao
                  </span>
                </div>
              </div>
              <div class="song-item">
                <span class="song-emoji">üéµ</span>
                <div class="song-details">
                  <strong>"Stay With Me"</strong>
                  <span>Miki Matsubara 
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- PAGE 9: Birthday Challenges -->
      <div class="paper-roll">
        <div class="paper-content">
          <div class="emoji-bar">üé≤üéÆüéØ</div>
          <h1 style="text-align: center;">18th Birthday Challenge List</h1>
          <div class="challenges-container">
            <ol>
              <li>Try a completely new food üçú</li>
              <li>Learn a new dance move üíÉ</li>
              <li>Take a spontaneous road trip üöó</li>
              <li>Make someone's day better üíù</li>
              <li>Learn to cook something fancy üë®‚Äçüç≥</li>
              <li>Start a new hobby üé®</li>
              <li>Watch the sunrise üåÖ</li>
              <li>Plant something and watch it grow üå±</li>
              <li>Write a letter to future you ‚úâÔ∏è</li>
              <li>Make a time capsule üì¶</li>
              <li>Do something that scares you üí™</li>
              <li>Learn a new skill üéØ</li>
              <li>Make a new friend ü§ù</li>
              <li>Create something with your hands üõ†Ô∏è</li>
              <li>Take a photo every day for a week üì∏</li>
              <li>Do a random act of kindness ‚ù§Ô∏è</li>
              <li>Start a collection of something üóÇÔ∏è</li>
              <li>Make a bucket list for the year ‚ú®</li>
            </ol>
          </div>
        </div>
      </div>

      <!-- PAGE 10: Final Message -->
      <div class="paper-roll">
        <div class="paper-content">
          <div class="emoji-bar">üí´üåü‚ú®</div>
          <h1 style="text-align: center;">A Final Birthday Wish</h1>
          <div class="final-message">
            <p style="font-family: 'Great Vibes', cursive; font-size: 2em; line-height: 1.5;">
              As this birthday message comes to an end,<br>
              Remember you're not just a year older, but a year more awesome!<br>
              Your journey is just beginning, and the world is yours to conquer.<br>
              Keep shining bright, stay amazing, and never stop being you!<br><br>
              Happy 18th Birthday!
            </p>
            <div style="margin-top: 30px; font-family: 'Permanent Marker', cursive; color: #7cb342;">
              With love and best wishes,<br>
              Your Friend
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modified Background Message -->
  <div id="bgMessage"> My lucky Star!</div>
  
  <script>
    (() => {
      const pullTab = document.getElementById('pullTab');
      const instruction = document.querySelector('.pull-instruction');
      const pages = Array.from(document.querySelectorAll('.paper-roll'));
      const introImage = document.getElementById('introImage');
      // Final positions for each page after reveal - Updated for 10 pages
      const finalPositions = [0, 1400, 3000, 4050, 5200, 6300, 7350, 8400, 9550, 10650];
      let isDragging = false, startY = 0, currentY = 0;
      const threshold = 200;
      const cascadeDelay = parseInt(getComputedStyle(document.documentElement)
                               .getPropertyValue('--cascade-delay'));
      
      // Background colors for page reveals - Extended for 10 pages
      const backgroundColors = [
        'var(--color1)',
        'var(--color2)',
        'var(--color3)',
        'var(--color4)',
        'var(--color5)',
        'var(--color1)',
        'var(--color2)',
        'var(--color3)',
        'var(--color4)',
        'var(--color5)'
      ];
      
      // Ensure top page gets highest 
      pages.forEach((page, i) => page.style.zIndex = pages.length - i);
      
      // Helper: Get Y coordinate from mouse/touch events
      const getY = (e) => (e.clientY !== undefined ? e.clientY : e.touches[0].clientY);
      
      const startDrag = (e) => {
        if (!pages.length) return;
        isDragging = true;
        startY = getY(e);
        document.body.style.cursor = 'grabbing';
        window.addEventListener('mousemove', doDrag, { passive: false });
        window.addEventListener('touchmove', doDrag, { passive: false });
        window.addEventListener('mouseup', stopDrag);
        window.addEventListener('touchend', stopDrag);
      };
      
      const doDrag = (e) => {
        if (!isDragging) return;
        e.preventDefault();
        currentY = getY(e);
        const deltaY = currentY - startY;
        const progress = Math.min(Math.max(deltaY / 500, 0), 1);
        const topPage = pages[0];
        const rotation = 15 - progress * 15;
        topPage.style.transform = `translateY(${(-150 + progress * 150)}%) rotateX(${rotation}deg) scale(${0.95 + progress * 0.05})`;
        if (progress > 0.1) {
          if (Math.random() < 0.2) createAirParticle(topPage, currentY);
          if (Math.random() < 0.1) createSwirl(topPage, currentY);
          if (Math.random() < 0.3) createConfetti(progress);
        }
      };
      
      const stopDrag = () => {
        if (!isDragging) return;
        isDragging = false;
        document.body.style.cursor = 'grab';
        const deltaY = currentY - startY;
        if (deltaY > threshold) {
          if (instruction) instruction.style.display = 'none';
          fadeOutIntroImage();
          progressiveRevealAll();
        } else {
          pages[0].style.transform = `translateY(-150%) rotateX(15deg) scale(0.95)`;
        }
        window.removeEventListener('mousemove', doDrag);
        window.removeEventListener('touchmove', doDrag);
        window.removeEventListener('mouseup', stopDrag);
        window.removeEventListener('touchend', stopDrag);
      };
      
      function fadeOutIntroImage() {
        if (!introImage) return;
        introImage.classList.add('hide');
        setTimeout(() => {
          if (introImage.parentNode) introImage.parentNode.removeChild(introImage);
        }, 500); // Reduced from 1000ms to 500ms
      }
      
      const progressiveRevealAll = () => {
        pullTab.style.display = 'none';
        
        // Check if device is mobile
        const isMobile = window.innerWidth <= 768;
        
        if (isMobile) {
          document.body.style.background = backgroundColors[0];
          
          // Make sure intro image is fully gone and papers are properly hidden
          if (introImage) {
            introImage.style.opacity = '0';
            introImage.style.transform = 'translate(-50%, -50%) scale(0.8)';
            introImage.style.visibility = 'hidden';
          }
          
          // Reset any existing styles that might interfere
          pages.forEach(page => {
            page.style.position = 'relative';
            page.style.top = 'auto';
            page.style.left = 'auto';
            page.style.transform = 'none';
            page.style.opacity = '0';
            page.style.visibility = 'hidden';
            page.style.height = 'auto';
            page.style.minHeight = 'auto';
            page.style.marginBottom = '100px'; // Add spacing between papers on mobile
          });
          
          // Reveal pages with a slide-up animation
        pages.forEach((page, i) => {
          setTimeout(() => {
              document.body.style.background = backgroundColors[i];
              
              page.style.opacity = '1';
              page.style.visibility = 'visible';
            page.classList.add('revealed');
              
            createMultipleEffects(page);
              
              const pageTop = page.offsetTop - 20;
              window.scrollTo({ 
                top: pageTop, 
                behavior: 'smooth' 
              });
          }, i * cascadeDelay);
        });
        } else {
          // Updated desktop animation with proper spacing for all pages
          pages.forEach((page, i) => {
        setTimeout(() => {
              const finalY = finalPositions[i];
              page.style.setProperty('--final-y', finalY + "px");
              page.classList.add('revealed');
              document.body.style.background = backgroundColors[i];
              createMultipleEffects(page);
              window.scrollTo({ top: finalY, behavior: 'smooth' });
            }, i * cascadeDelay);
          });
        }

        // After all pages are revealed, show final message and scroll
        setTimeout(() => {
          const finalMessage = document.createElement('div');
          finalMessage.id = 'finalMessage';
          
          const messageContent = document.createElement('div');
          messageContent.className = 'message-content';
          
          messageContent.innerHTML = `
            It took <span class="rainbow-word">31</span> hours and <span class="rainbow-word">2686</span> lines of code,<br>
            but it's a small price to make you <span class="rainbow-word">happy</span>
          `;
          
          // Add sparkles
          for (let i = 0; i < 20; i++) {
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle';
            sparkle.style.left = Math.random() * 100 + '%';
            sparkle.style.top = Math.random() * 100 + '%';
            sparkle.style.animationDelay = Math.random() * 2 + 's';
            messageContent.appendChild(sparkle);
          }
          
          finalMessage.appendChild(messageContent);
          document.body.appendChild(finalMessage);

          window.scrollTo({ 
            top: document.documentElement.scrollHeight, 
            behavior: 'smooth' 
          });
          
          // Show message with fade in
          setTimeout(() => {
            finalMessage.style.opacity = '1';
            finalMessage.classList.add('visible');
          }, 1000);

          // Keep the message instead of removing it
          setTimeout(() => {
            window.scrollTo({ 
              top: 0, 
              behavior: 'smooth' 
            });
          }, 5000);
        }, pages.length * cascadeDelay + 1000);
      };
      
      const createMultipleEffects = (page) => {
        for (let i = 0; i < 10; i++) {
          setTimeout(() => {
            createAirParticle(page, 200);
            if (i % 2 === 0) createSwirl(page, 200);
            createConfetti(1);
          }, i * 100);
        }
      };
      
      const createAirParticle = (page, yPos = 0) => {
        const particle = document.createElement('div');
        particle.className = 'air-particle';
        const x = Math.random() * page.offsetWidth;
        const y = Math.random() * 100 + yPos;
        particle.style.left = `${x}px`;
        particle.style.top = `${y}px`;
        page.appendChild(particle);
        setTimeout(() => particle.remove(), 2000);
      };
      
      const createSwirl = (page, yPos = 0) => {
        const swirl = document.createElement('div');
        swirl.className = 'swirl';
        const x = Math.random() * page.offsetWidth;
        const y = Math.random() * 100 + yPos;
        swirl.style.left = `${x}px`;
        swirl.style.top = `${y}px`;
        page.appendChild(swirl);
        setTimeout(() => swirl.remove(), 1500);
      };
      
      const createConfetti = (intensity = 1) => {
        const count = Math.floor(15 * intensity);
        for (let i = 0; i < count; i++) {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.left = `${Math.random() * 100}vw`;
          confetti.style.background = `hsl(${Math.random() * 360}, 70%, 60%)`;
          confetti.style.animationDuration = `${Math.random() * 2 + 1}s`;
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 3000);
        }
      };
      
      pullTab.addEventListener('mousedown', startDrag);
      pullTab.addEventListener('touchstart', startDrag);
      
      /* ===== ADD RANDOM SWIMMING BACKGROUND EMOJIS ===== */
      const totalEmojis = 30;
      const emojiArray = ["‚≠ê", "‚≠ê", "‚≠ê", "‚≠ê", "‚≠ê", "üéÇ", "üéÅ", "üç∞", "‚òÅÔ∏è"];
      function getBiasedLeft() {
        if (Math.random() < 0.7) {
          return Math.random() < 0.5 ? (Math.random() * 20) + "%" : (80 + Math.random() * 20) + "%";
        } else {
          return (20 + Math.random() * 60) + "%";
        }
      }
      const emojiOverlay = document.getElementById("emojiOverlay");
      for (let i = 0; i < totalEmojis; i++) {
        const emojiEl = document.createElement("div");
        emojiEl.classList.add("bg-emoji");
        const chosenEmoji = emojiArray[Math.floor(Math.random() * emojiArray.length)];
        emojiEl.innerText = chosenEmoji;
        emojiEl.style.top = Math.random() * 100 + "%";
        emojiEl.style.left = getBiasedLeft();
        if (chosenEmoji === "‚≠ê") {
          emojiEl.classList.add("star-emoji");
          emojiEl.style.animationDuration = (10 + Math.random() * 5) + "s";
          setInterval(() => {
            let rect = emojiEl.getBoundingClientRect();
            const particle = document.createElement("div");
            particle.className = "star-particle";
            particle.style.left = rect.left + rect.width / 2 + "px";
            particle.style.top = rect.top + rect.height / 2 + "px";
            document.body.appendChild(particle);
            setTimeout(() => particle.remove(), 500);
          }, 500);
        } else {
          emojiEl.style.animationDuration = (25 + Math.random() * 20) + "s";
        }
        emojiEl.style.animationDelay = Math.random() * 5 + "s";
        emojiOverlay.appendChild(emojiEl);
      }

      // Add resize handler
      window.addEventListener('resize', () => {
        const isMobile = window.innerWidth <= 768;
        if (isMobile) {
          pages.forEach(page => {
            page.style.position = 'relative';
            page.style.top = 'auto';
            page.style.left = 'auto';
            page.style.transform = 'none';
            page.style.opacity = '0';
            page.style.visibility = 'hidden';
            page.style.height = 'auto';
            page.style.minHeight = 'auto';
            page.style.marginBottom = '100px'; // Add spacing between papers on mobile
          });
        }
      });
    })();
  </script>
<audio id="bgMusic" loop>
    <source src="yamen.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
</audio>

<button id="muteButton" style="
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: red;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
    z-index: 1001;
">
    üîä Play Music
</button>

<script>
// Add this to your existing JavaScript code at the end of your script
document.addEventListener("DOMContentLoaded", function() {
    const audio = document.getElementById("bgMusic");
    const muteButton = document.getElementById("muteButton");
    let isPlaying = false;
    
    // Simple function to play audio
    function playMusic() {
        if (!isPlaying) {
            audio.volume = 0.05; // Lower volume to simulate muffled effect
            audio.play().then(() => {
                isPlaying = true;
                muteButton.innerHTML = "üîä Mute";
                muteButton.style.background = "red";
            }).catch(error => {
                console.error("Playback failed:", error);
            });
        }
    }
    
    // Function to handle mute button click
    function toggleMute(e) {
        e.stopPropagation(); // Prevent document click handler
        
        if (!isPlaying) {
            playMusic();
            return;
        }
        
        if (audio.muted) {
            audio.muted = false;
            muteButton.innerHTML = "üîä Mute";
            muteButton.style.background = "red";
        } else {
            audio.muted = true;
            muteButton.innerHTML = "üîá Unmute";
            muteButton.style.background = "green";
        }
    }
    
    // Attach to mute button
    muteButton.addEventListener("click", toggleMute);
    
    // Connect to the existing pull mechanism - directly modify your existing code
    const originalProgressiveReveal = window.progressiveRevealAll;
    
    if (typeof originalProgressiveReveal === 'function') {
        window.progressiveRevealAll = function() {
            // Call the original function
            originalProgressiveReveal.apply(this, arguments);
            // Play music after reveal starts
            setTimeout(playMusic, 500);
        };
    } else {
        // Add a listener to detect when the first page is revealed
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'attributes' && 
                    mutation.attributeName === 'class' &&
                    mutation.target.classList.contains('revealed')) {
                    playMusic();
                    observer.disconnect();
                }
            });
        });
        
        // Observe all paper-roll elements
        document.querySelectorAll('.paper-roll').forEach(page => {
            observer.observe(page, { attributes: true });
        });
    }
    
    // Add our function directly to the stopDrag function
    const originalStopDrag = window.stopDrag;
    if (typeof originalStopDrag === 'function') {
        window.stopDrag = function() {
            const result = originalStopDrag.apply(this, arguments);
            
            // Check if we need to trigger music
            if (window.isDragging && window.currentY - window.startY > window.threshold) {
                // The pull was successful, play music
                setTimeout(playMusic, 800);
            }
            
            return result;
        };
    }
});
</script> 
<!-- Add this to the HEAD section of your HTML, just before the closing </head> tag -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  /* Countdown Intro Screen Styles */
  #countdownIntro {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background: linear-gradient(135deg, #feeeed, #ffd6d6);
    z-index: 2000;
    opacity: 1;
    transition: opacity 0.8s ease;
  }
  
  .intro-content {
    text-align: center;
    padding: 35px 25px;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    position: relative;
    z-index: 10;
  }
  
  .countdown-display {
    font-family: 'Montserrat', sans-serif;
    font-weight: 700;
    font-size: 4.5rem;
    color: #ff6b6b;
    height: 6rem;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    margin: 20px 0;
  }
  
  .countdown-number {
    position: absolute;
    opacity: 1;
    transition: all 0.3s ease;
  }
  
  .countdown-number.fade-out {
    opacity: 0;
    transform: scale(1.2);
  }
  
  .countdown-number.fade-in {
    opacity: 0;
    transform: scale(0.8);
    animation: fadeInNumber 0.3s forwards;
  }
  
  @keyframes fadeInNumber {
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
  
  .countdown-controls {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 20px;
  }
  
  .countdown-btn {
    background-color: #ff6b6b;
    color: white;
    border: none;
    padding: 12px 28px;
    border-radius: 30px;
    font-family: 'Montserrat', sans-serif;
    font-weight: 600;
    font-size: 0.95rem;
    cursor: pointer;
    transition: transform 0.2s ease, background-color 0.2s ease;
    box-shadow: 0 4px 10px rgba(255, 107, 107, 0.3);
  }
  
  .countdown-btn:hover {
    background-color: #ff5252;
    transform: translateY(-2px);
  }
  
  .countdown-btn:active {
    transform: translateY(0);
  }
  
  /* Simplified particle system for better performance */
  .intro-emoji {
    position: absolute;
    opacity: 0.6;
    pointer-events: none;
    font-size: 1.4rem;
    transform: translate(0, 0);
    transition: transform 0.5s ease-out;
  }
  
  /* Responsive adjustments */
  @media only screen and (max-width: 480px) {
    .intro-title {
      font-size: 1.5rem;
    }
    
    .intro-instructions {
      font-size: 0.95rem;
    }
    
    .countdown-display {
      font-size: 4rem;
    }
    
    .countdown-btn {
      padding: 10px 20px;
      font-size: 0.9rem;
    }
  }
  
  /* iOS-specific fixes */
  @supports (-webkit-touch-callout: none) {
    .intro-content {
      -webkit-transform: translateZ(0);
    }
    
    .countdown-btn {
      -webkit-appearance: none;
    }
  }
</style>

<!-- Add this right after the opening <body> tag -->
<div id="countdownIntro">
  <div class="intro-wrapper">
    <div class="intro-content">
      <h1 class="intro-title">A Special Moment Awaits</h1>
      <p class="intro-instructions">
        <b>Before you begin:</b><br>
        1. Smile <br>
        2. Take the fragrance and spray into the air around you
      </p>
      <div class="countdown-display" id="countdownDisplay">
        <div class="countdown-number" id="countdownNumber">10</div>
      </div>
      <div class="countdown-controls">
        <button class="countdown-btn" id="pauseBtn">Pause</button>
        <button class="countdown-btn" id="skipBtn">Skip</button>
      </div>
    </div>
  </div>
</div>

<!-- Add this script just before the closing </body> tag -->
<script>
  document.addEventListener("DOMContentLoaded", function() {
    const countdownIntro = document.getElementById("countdownIntro");
    const countdownDisplay = document.getElementById("countdownDisplay");
    const pauseBtn = document.getElementById("pauseBtn");
    const skipBtn = document.getElementById("skipBtn");
    
    let countdown = 10;
    let isPaused = false;
    let countdownInterval;
    let isTransitioning = false;
    let isCompleted = false;
    
    // Create initial particles
    createEnhancedParticles();
    
    function startCountdown() {
      if (countdownInterval) clearInterval(countdownInterval);
      
      countdownInterval = setInterval(() => {
        if (!isPaused && !isTransitioning && !isCompleted) {
          if (countdown <= 0) {
            completeCountdown();
            return;
          }
          updateCountdownDisplay(countdown - 1);
          countdown--;
        }
      }, 1000);
    }
    
    function updateCountdownDisplay(number) {
      if (isTransitioning || isCompleted) return;
      isTransitioning = true;
      
      // Remove any existing numbers first
      const existingNumbers = countdownDisplay.querySelectorAll('.countdown-number');
      existingNumbers.forEach(num => {
        num.classList.add('fade-out');
        setTimeout(() => num.remove(), 300);
      });
      
      // Create new number after a short delay
      setTimeout(() => {
      const newNumber = document.createElement("div");
      newNumber.className = "countdown-number fade-in";
      newNumber.textContent = number;
        
        if (number <= 3) {
          newNumber.style.color = "#ff4444";
          createExtraParticles(10);
        }
        
        countdownDisplay.appendChild(newNumber);
        
        setTimeout(() => {
          isTransitioning = false;
        }, 300);
        }, 300);
    }
    
    function completeCountdown() {
      if (isCompleted) return;
      isCompleted = true;
      clearInterval(countdownInterval);
      
      // Create a burst of particles for a grand finale
      createExtraParticles(30);
      
      // Initialize emojis before fading out countdown
      if (typeof initializeEmojis === 'function') {
        initializeEmojis();
      }
      
      // Fade out the countdown intro
      setTimeout(() => {
      countdownIntro.style.opacity = "0";
      
      // After fade out animation completes, hide the countdown intro
        setTimeout(() => {
        countdownIntro.style.display = "none";
        
        // Make sure the main content is visible
          const mainElements = {
            introImage: document.getElementById("introImage"),
            pullTab: document.querySelector(".pull-tab"),
            pullInstruction: document.querySelector(".pull-instruction")
          };
          
        Object.values(mainElements).forEach(el => {
            if (el) {
              el.style.opacity = "1";
              el.style.visibility = "visible";
            }
          });

          // Play music after countdown naturally ends
          const audio = document.getElementById("bgMusic");
          if (audio && !audio.playing) {
            audio.volume = 0.05;
            audio.play().then(() => {
              isPlaying = true;
              const muteButton = document.getElementById("muteButton");
              if (muteButton) {
                muteButton.innerHTML = "üîä Mute";
                muteButton.style.background = "red";
              }
            }).catch(error => {
              console.error("Playback failed:", error);
            });
          }
      }, 800);
      }, 1000);
    }
    
    function createEnhancedParticles() {
      const emojis = ["‚ú®", "üéâ", "üéä", "üí´", "üåü"];
      const particleCount = Math.min(15, window.innerWidth < 600 ? 8 : 15);
      const container = document.querySelector(".intro-content");
      
      // Clear existing particles
      const existingParticles = container.querySelectorAll('.intro-emoji');
      existingParticles.forEach(p => p.remove());
      
      for (let i = 0; i < particleCount; i++) {
        const emoji = document.createElement("div");
        emoji.className = "intro-emoji";
        emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
        
        const angle = Math.random() * Math.PI * 2;
        const distance = 50 + Math.random() * 100;
        const x = Math.cos(angle) * distance;
        const y = Math.sin(angle) * distance;
        
        emoji.style.transform = `translate(${x}px, ${y}px)`;
        emoji.style.opacity = 0.4 + Math.random() * 0.4;
        
        container.appendChild(emoji);
      }
    }
    
    function createExtraParticles(count) {
      const emojis = ["‚ú®", "üéâ", "üéä", "üí´", "üåü"];
      
      for (let i = 0; i < count; i++) {
        const emoji = document.createElement("div");
        emoji.className = "intro-emoji";
        emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
        
        const rect = countdownDisplay.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        
        const angle = Math.random() * Math.PI * 2;
        const distance = 20 + Math.random() * 60;
        const x = Math.cos(angle) * distance;
        const y = Math.sin(angle) * distance;
        
        emoji.style.position = "fixed";
        emoji.style.left = `${centerX}px`;
        emoji.style.top = `${centerY}px`;
        emoji.style.transform = `translate(${x}px, ${y}px)`;
        emoji.style.opacity = "0";
        emoji.style.transition = "transform 0.5s ease-out, opacity 0.5s ease-out";
        
        document.body.appendChild(emoji);
        
        requestAnimationFrame(() => {
          emoji.style.opacity = "0.8";
          emoji.style.transform = `translate(${x * 3}px, ${y * 3}px)`;
        });
        
        setTimeout(() => emoji.remove(), 1000);
      }
    }
    
    pauseBtn.addEventListener("click", function() {
      if (isCompleted) return;
      isPaused = !isPaused;
      this.textContent = isPaused ? "Resume" : "Pause";
      this.style.background = isPaused ? "#4CAF50" : "#ff6b6b";
      
      if (!isPaused) startCountdown();
    });
    
    skipBtn.addEventListener("click", completeCountdown);
    
    // Start countdown after a short delay
    setTimeout(startCountdown, 500);
  });
</script>

<!-- Update the emoji initialization to prevent reset -->
<script>
let hasInitializedEmojis = false;

function initializeEmojis() {
  if (hasInitializedEmojis) return;
  hasInitializedEmojis = true;
  
  const emojiOverlay = document.getElementById("emojiOverlay");
  if (!emojiOverlay) return;
  
  // Clear existing emojis
  emojiOverlay.innerHTML = '';
  
  // Determine appropriate emoji count based on screen size
  const screenWidth = window.innerWidth;
  const screenHeight = window.innerHeight;
  const screenArea = screenWidth * screenHeight;
  
  let totalEmojis;
  if (screenArea < 300000) {
    totalEmojis = 10;
  } else if (screenArea < 600000) {
    totalEmojis = 15;
  } else if (screenArea < 1000000) {
    totalEmojis = 20;
  } else {
    totalEmojis = 25;
  }
  
  const emojiArray = ["‚≠ê", "üéÇ", "üéÅ", "üéà", "üéâ", "‚ú®", "üí´", "üåü"];
  const placedPositions = [];
  const minDistance = Math.min(screenWidth, screenHeight) * 0.08;
  
  for (let i = 0; i < totalEmojis; i++) {
    const emojiEl = document.createElement("div");
    emojiEl.classList.add("bg-emoji");
    
    const chosenEmoji = Math.random() < 0.4 ? "‚≠ê" : emojiArray[Math.floor(Math.random() * emojiArray.length)];
    emojiEl.innerText = chosenEmoji;
    
    let x, y, attempts = 0, validPosition = false;
    
    while (!validPosition && attempts < 50) {
      const margin = screenWidth * 0.05;
      x = margin + Math.random() * (screenWidth - 2 * margin);
      y = margin + Math.random() * (screenHeight - 2 * margin);
      
      validPosition = true;
      for (const pos of placedPositions) {
        const distance = Math.sqrt(Math.pow(x - pos.x, 2) + Math.pow(y - pos.y, 2));
        if (distance < minDistance) {
          validPosition = false;
          break;
        }
      }
      
      attempts++;
    }
    
    placedPositions.push({x, y});
    
    emojiEl.style.left = `${x}px`;
    emojiEl.style.top = `${y}px`;
    
    const duration = 15 + Math.random() * 15;
    const delay = Math.random() * 5;
    emojiEl.style.animationDuration = `${duration}s`;
    emojiEl.style.animationDelay = `${delay}s`;
    
    if (chosenEmoji === "‚≠ê") {
      emojiEl.classList.add("star-emoji");
      
      const createStarParticle = () => {
        if (!document.body.contains(emojiEl)) return;
        
        const rect = emojiEl.getBoundingClientRect();
        if (rect.top < 0 || rect.left < 0 || 
            rect.right > window.innerWidth || 
            rect.bottom > window.innerHeight) {
          return;
        }
        
        const particle = document.createElement("div");
        particle.className = "star-particle";
        particle.style.left = `${rect.left + rect.width / 2}px`;
        particle.style.top = `${rect.top + rect.height / 2}px`;
        document.body.appendChild(particle);
        
        setTimeout(() => particle.remove(), 500);
      };
      
      setInterval(createStarParticle, 1000);
    }
    
    emojiOverlay.appendChild(emojiEl);
  }
}

// Only initialize on resize if already initialized
window.addEventListener('resize', () => {
  if (hasInitializedEmojis) {
    debounce(initializeEmojis, 300)();
    }
  });
</script>

<!-- Update the swipe handling code -->
<script>
const pages = document.querySelectorAll('.page');
const swipeThresholds = new Map();
const swipeProgress = new Map();

// Initialize swipe thresholds based on page height
function initializeSwipeThresholds() {
  pages.forEach((page) => {
    const pageHeight = page.scrollHeight;
    const viewportHeight = window.innerHeight;
    // If page is significantly longer than viewport, require more swipes
    swipeThresholds.set(page, pageHeight > viewportHeight * 1.5 ? 2 : 1);
    swipeProgress.set(page, 0);
  });
}

// Call this when the page loads
initializeSwipeThresholds();

// Update the wheel event handler
function handleWheel(event) {
  if (event.deltaY > 0) {  // Scrolling down
    const currentPage = getCurrentPage();
    if (!currentPage) return;

    const threshold = swipeThresholds.get(currentPage);
    let progress = swipeProgress.get(currentPage) || 0;
    progress += 1;
    swipeProgress.set(currentPage, progress);

    // Visual feedback for progress
    if (threshold > 1) {
      const progressPercent = (progress / threshold) * 100;
      currentPage.style.filter = `brightness(${100 - progressPercent * 0.3}%)`;
    }

    if (progress >= threshold) {
      revealNextPage(currentPage);
      // Reset the brightness
      currentPage.style.filter = '';
    }
  }
}

function getCurrentPage() {
  return Array.from(pages).find(page => 
    !page.style.transform || 
    !page.style.transform.includes('translateY(-100%)')
  );
}

function revealNextPage(currentPage) {
  const nextPage = currentPage.nextElementSibling;
  if (nextPage && nextPage.classList.contains('page')) {
    currentPage.style.transform = 'translateY(-100%)';
    currentPage.style.opacity = '0';
    
    setTimeout(() => {
      nextPage.style.visibility = 'visible';
      nextPage.style.transform = 'translateY(0)';
      nextPage.style.opacity = '1';
      // Reset progress for next page
      swipeProgress.set(nextPage, 0);
    }, 500);
  }
}

// Update or add the event listener
document.removeEventListener('wheel', handleWheel);
document.addEventListener('wheel', handleWheel);
</script>

<script>
// Add this after your existing scripts
function createSparkles() {
    const firstPage = document.querySelector('.first-page-content');
    if (!firstPage) return;

    const sparkleCount = 15;
    const sparkleEmojis = ['‚ú®', '‚≠ê', 'üí´', 'üåü'];

    for (let i = 0; i < sparkleCount; i++) {
        const sparkle = document.createElement('div');
        sparkle.className = 'sparkle-element';
        sparkle.textContent = sparkleEmojis[Math.floor(Math.random() * sparkleEmojis.length)];
        sparkle.style.left = Math.random() * 100 + '%';
        sparkle.style.top = Math.random() * 100 + '%';
        sparkle.style.animationDelay = (Math.random() * 2) + 's';
        firstPage.appendChild(sparkle);
    }
}

document.addEventListener('DOMContentLoaded', createSparkles);
</script>

<!-- Add this script to wrap "proud" with special styling -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const paragraphs = document.querySelectorAll('.paper-roll:nth-child(5) p');
  paragraphs.forEach(p => {
    p.innerHTML = p.innerHTML.replace(
      /proud/g, 
      '<span class="proud-text">proud</span>'
    );
  });
});
</script>

</body>
</html>
